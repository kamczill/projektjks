{"version":3,"file":"build-and-store-ingestible-root-field-non-node-queries.js","names":["buildNonNodeQueries","remoteSchema","ingestibles","nonNodeRootFields","store","getState","fragments","transformedFields","recursivelyTransformFields","fields","parentType","name","type","selectionSet","buildSelectionSet","builtFragments","generateReusableFragments","nonNodeQuery","dispatch","setState"],"sources":["../../../src/steps/ingest-remote-schema/build-and-store-ingestible-root-field-non-node-queries.js"],"sourcesContent":["import store from \"~/store\"\nimport recursivelyTransformFields from \"~/steps/ingest-remote-schema/build-queries-from-introspection/recursively-transform-fields\"\nimport { buildSelectionSet } from \"~/steps/ingest-remote-schema/build-queries-from-introspection/build-query-on-field-name\"\nimport { generateReusableFragments } from \"./build-queries-from-introspection/build-query-on-field-name\"\n\nconst buildNonNodeQueries = async () => {\n  const {\n    remoteSchema: {\n      ingestibles: { nonNodeRootFields },\n    },\n  } = store.getState()\n\n  const fragments = {}\n\n  // recursively transform fields\n  const transformedFields = recursivelyTransformFields({\n    fields: nonNodeRootFields,\n    parentType: {\n      name: `RootQuery`,\n      type: `OBJECT`,\n    },\n    fragments,\n  })\n\n  const selectionSet = buildSelectionSet(transformedFields)\n\n  const builtFragments = generateReusableFragments({\n    fragments,\n    selectionSet,\n  })\n\n  const nonNodeQuery = `\n      query NON_NODE_QUERY {\n        ${selectionSet}\n      }\n      ${builtFragments}\n  `\n\n  store.dispatch.remoteSchema.setState({ nonNodeQuery })\n}\n\nexport { buildNonNodeQueries }\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAGA,MAAMA,mBAAmB,GAAG,YAAY;EACtC,MAAM;IACJC,YAAY,EAAE;MACZC,WAAW,EAAE;QAAEC;MAAF;IADD;EADV,IAIFC,cAAA,CAAMC,QAAN,EAJJ;;EAMA,MAAMC,SAAS,GAAG,EAAlB,CAPsC,CAStC;;EACA,MAAMC,iBAAiB,GAAG,IAAAC,mCAAA,EAA2B;IACnDC,MAAM,EAAEN,iBAD2C;IAEnDO,UAAU,EAAE;MACVC,IAAI,EAAG,WADG;MAEVC,IAAI,EAAG;IAFG,CAFuC;IAMnDN;EANmD,CAA3B,CAA1B;EASA,MAAMO,YAAY,GAAG,IAAAC,wCAAA,EAAkBP,iBAAlB,CAArB;EAEA,MAAMQ,cAAc,GAAG,IAAAC,gDAAA,EAA0B;IAC/CV,SAD+C;IAE/CO;EAF+C,CAA1B,CAAvB;EAKA,MAAMI,YAAY,GAAI;AACxB;AACA,UAAUJ,YAAa;AACvB;AACA,QAAQE,cAAe;AACvB,GALE;;EAOAX,cAAA,CAAMc,QAAN,CAAejB,YAAf,CAA4BkB,QAA5B,CAAqC;IAAEF;EAAF,CAArC;AACD,CAlCD"}