{"version":3,"file":"set-request-headers.js","names":["setRequestHeaders","actions","pluginOptions","getPluginOptions","auth","url","password","username","htaccess","domain","headers","Authorization","b64e"],"sources":["../../src/steps/set-request-headers.ts"],"sourcesContent":["import { b64e } from \"~/utils/string-encoding\"\nimport { getPluginOptions } from \"~/utils/get-gatsby-api\"\n\nimport type { Step } from \"~/utils/run-steps\"\n\nexport const setRequestHeaders: Step = ({ actions }): void => {\n  if (typeof actions?.setRequestHeaders !== `function`) {\n    return\n  }\n\n  const pluginOptions = getPluginOptions()\n\n  const { auth, url } = pluginOptions\n  const { password, username } = auth?.htaccess || {}\n\n  if (password && username) {\n    actions.setRequestHeaders({\n      domain: url,\n      headers: {\n        Authorization: `Basic ${b64e(`${username}:${password}`)}`,\n      },\n    })\n  }\n}\n"],"mappings":";;;;;AAAA;;AACA;;AAIO,MAAMA,iBAAuB,GAAG,CAAC;EAAEC;AAAF,CAAD,KAAuB;EAC5D,IAAI,QAAOA,OAAP,aAAOA,OAAP,uBAAOA,OAAO,CAAED,iBAAhB,MAAuC,UAA3C,EAAsD;IACpD;EACD;;EAED,MAAME,aAAa,GAAG,IAAAC,8BAAA,GAAtB;EAEA,MAAM;IAAEC,IAAF;IAAQC;EAAR,IAAgBH,aAAtB;EACA,MAAM;IAAEI,QAAF;IAAYC;EAAZ,IAAyB,CAAAH,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEI,QAAN,KAAkB,EAAjD;;EAEA,IAAIF,QAAQ,IAAIC,QAAhB,EAA0B;IACxBN,OAAO,CAACD,iBAAR,CAA0B;MACxBS,MAAM,EAAEJ,GADgB;MAExBK,OAAO,EAAE;QACPC,aAAa,EAAG,SAAQ,IAAAC,oBAAA,EAAM,GAAEL,QAAS,IAAGD,QAAS,EAA7B,CAAgC;MADjD;IAFe,CAA1B;EAMD;AACF,CAlBM"}