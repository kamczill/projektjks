{"version":3,"file":"menu.js","names":["deleteMenuNodeChildMenuItems","node","pluginOptions","helpers","getNodesByType","actions","getGatsbyApi","allMenuItems","schema","typePrefix","allMenuItemsNodesWithThisMenuIdAsAParent","filter","menuItemNode","menu","id","deleteNode","menuBeforeChangeNode","api","remoteNode","actionType"],"sources":["../../../../src/steps/source-nodes/before-change-node/menu.js"],"sourcesContent":["import { getGatsbyApi } from \"~/utils/get-gatsby-api\"\n\nconst deleteMenuNodeChildMenuItems = node => {\n  const {\n    pluginOptions,\n    helpers: { getNodesByType, actions },\n  } = getGatsbyApi()\n\n  const allMenuItems = getNodesByType(\n    `${pluginOptions.schema.typePrefix}MenuItem`\n  )\n\n  const allMenuItemsNodesWithThisMenuIdAsAParent = allMenuItems.filter(\n    menuItemNode => menuItemNode.menu.node.id === node.id\n  )\n\n  for (const menuItemNode of allMenuItemsNodesWithThisMenuIdAsAParent) {\n    actions.deleteNode(menuItemNode)\n  }\n}\n\nexport const menuBeforeChangeNode = async api => {\n  if (api.remoteNode && api.actionType === `DELETE`) {\n    // delete child menu items\n    return deleteMenuNodeChildMenuItems(api.remoteNode)\n  }\n\n  return null\n}\n"],"mappings":";;;;;AAAA;;AAEA,MAAMA,4BAA4B,GAAGC,IAAI,IAAI;EAC3C,MAAM;IACJC,aADI;IAEJC,OAAO,EAAE;MAAEC,cAAF;MAAkBC;IAAlB;EAFL,IAGF,IAAAC,0BAAA,GAHJ;EAKA,MAAMC,YAAY,GAAGH,cAAc,CAChC,GAAEF,aAAa,CAACM,MAAd,CAAqBC,UAAW,UADF,CAAnC;EAIA,MAAMC,wCAAwC,GAAGH,YAAY,CAACI,MAAb,CAC/CC,YAAY,IAAIA,YAAY,CAACC,IAAb,CAAkBZ,IAAlB,CAAuBa,EAAvB,KAA8Bb,IAAI,CAACa,EADJ,CAAjD;;EAIA,KAAK,MAAMF,YAAX,IAA2BF,wCAA3B,EAAqE;IACnEL,OAAO,CAACU,UAAR,CAAmBH,YAAnB;EACD;AACF,CAjBD;;AAmBO,MAAMI,oBAAoB,GAAG,MAAMC,GAAN,IAAa;EAC/C,IAAIA,GAAG,CAACC,UAAJ,IAAkBD,GAAG,CAACE,UAAJ,KAAoB,QAA1C,EAAmD;IACjD;IACA,OAAOnB,4BAA4B,CAACiB,GAAG,CAACC,UAAL,CAAnC;EACD;;EAED,OAAO,IAAP;AACD,CAPM"}