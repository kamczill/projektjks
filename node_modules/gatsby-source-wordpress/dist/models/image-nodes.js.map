{"version":3,"file":"image-nodes.js","names":["imageNodes","state","nodeMetaByUrl","reducers","setState","payload","pushNodeMeta","id","sourceUrl","modifiedGmt","nodeUrl","stripImageSizesFromUrl"],"sources":["../../src/models/image-nodes.js"],"sourcesContent":["import { stripImageSizesFromUrl } from \"~/steps/source-nodes/fetch-nodes/fetch-referenced-media-items\"\n\nconst imageNodes = {\n  state: {\n    nodeMetaByUrl: {},\n  },\n\n  reducers: {\n    setState(state, payload) {\n      state = {\n        ...state,\n        ...payload,\n      }\n\n      return state\n    },\n\n    pushNodeMeta(state, { id, sourceUrl, modifiedGmt }) {\n      const nodeUrl = stripImageSizesFromUrl(sourceUrl)\n      // don't overwrite the lookup table in case we have multiple\n      // sized urls for the same image\n      if (!state.nodeMetaByUrl[nodeUrl]) {\n        state.nodeMetaByUrl[nodeUrl] = {\n          id,\n          modifiedGmt,\n        }\n      }\n\n      return state\n    },\n  },\n}\n\nexport default imageNodes\n"],"mappings":";;;;;AAAA;;AAEA,MAAMA,UAAU,GAAG;EACjBC,KAAK,EAAE;IACLC,aAAa,EAAE;EADV,CADU;EAKjBC,QAAQ,EAAE;IACRC,QAAQ,CAACH,KAAD,EAAQI,OAAR,EAAiB;MACvBJ,KAAK,GAAG,EACN,GAAGA,KADG;QAEN,GAAGI;MAFG,CAAR;MAKA,OAAOJ,KAAP;IACD,CARO;;IAURK,YAAY,CAACL,KAAD,EAAQ;MAAEM,EAAF;MAAMC,SAAN;MAAiBC;IAAjB,CAAR,EAAwC;MAClD,MAAMC,OAAO,GAAG,IAAAC,iDAAA,EAAuBH,SAAvB,CAAhB,CADkD,CAElD;MACA;;MACA,IAAI,CAACP,KAAK,CAACC,aAAN,CAAoBQ,OAApB,CAAL,EAAmC;QACjCT,KAAK,CAACC,aAAN,CAAoBQ,OAApB,IAA+B;UAC7BH,EAD6B;UAE7BE;QAF6B,CAA/B;MAID;;MAED,OAAOR,KAAP;IACD;;EAtBO;AALO,CAAnB;eA+BeD,U"}